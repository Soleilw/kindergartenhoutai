(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-582efe4d"],{"365c":function(t,e,a){"use strict";var n=a("be3b"),i=a("99b1"),s=a.n(i),r={students:function(t,e,a){return n["a"].get(s.a.Students,{page:t,limit:e,class_id:a})},student:function(t){return n["a"].post(s.a.Student,t)},delStudent:function(t){return n["a"].del(s.a.DelStudent,{student_id:t})},searchNumber:function(t,e,a){return n["a"].get(s.a.Students,{page:t,limit:e,number:a})},searchName:function(t,e,a){return n["a"].get(s.a.Students,{page:t,limit:e,name:a})},wxUser:function(t,e){return n["a"].get(s.a.WxUser,{page:t,limit:e})},bindFamily:function(t){return n["a"].post(s.a.BindFamily,t)},familySearch:function(t,e,a){return n["a"].get(s.a.FamilySearch,{page:t,limit:e,number:a})},studentFace:function(t){return n["a"].post(s.a.StudentFace,t)},studentEditFace:function(t){return n["a"].put(s.a.StudentEditFace,t)},faceLogs:function(t,e,a){return n["a"].get(s.a.StudentFaceLogs,{page:t,limit:e,id:a})},grade:function(t){return n["a"].post(s.a.Grade,t)},grades:function(t,e){return n["a"].get(s.a.Grades,{page:t,limit:e})},delGrade:function(t){return n["a"].del(s.a.DelGrade,{grade_id:t})},_class:function(t){return n["a"].post(s.a.Class,t)},classes:function(t,e,a){return n["a"].get(s.a.Classes,{page:t,limit:e,grade_id:a})},delClass:function(t){return n["a"].del(s.a.DelClass,{class_id:t})},device:function(t){return n["a"].post(s.a.Device,t)},devices:function(t){return n["a"].post(s.a.Devices,{page:t})},family:function(t,e){return n["a"].get(s.a.Family,{page:t,limit:e})},masterFamily:function(t){return n["a"].put(s.a.MasterFamily,t)},delFamily:function(t){return n["a"].del(s.a.DelFamily,{id:t})},announcement:function(t){return n["a"].get(s.a.Announcement,{page:t})},exam:function(t){return n["a"].post(s.a.Exam,t)},exams:function(t,e){return n["a"].get(s.a.Exams,{page:t,limit:e})},examsDetail:function(t,e,a){return n["a"].get(s.a.ExamsDetail,{page:t,limit:e,exam_id:a})},delExam:function(t){return n["a"].del(s.a.Exam,{id:t})},subjects:function(){return n["a"].get(s.a.Subjects)},importsExam:function(t,e){return n["a"].post(s.a.ImportsExam,{exam_id:t,file:e})},imports:function(t,e){return n["a"].get(s.a.Imports,{page:t,limit:e})},delImport:function(t){return n["a"].del(s.a.DelImport,{id:t})},example:function(t){return n["a"].getExcel(s.a.Export,{subjects:t})},teacher:function(t,e,a,i){return n["a"].get(s.a.Teacher,{page:t,limit:e,state:a,worker:i})},delTeacher:function(t){return n["a"].del(s.a.DelTeacher,{id:t})},audit:function(t){return n["a"].post(s.a.Audit,t)},schools:function(t,e,a,i){return n["a"].get(s.a.Schools,{page:t,limit:e,mode:a,id:i})},oneSchool:function(t){return n["a"].get(s.a.School,{id:t})},studentInfo:function(t,e,a){return n["a"].get(s.a.StudentInfo,{page:t,limit:e,school_id:a})},schoolUser:function(t,e,a){return n["a"].get(s.a.SchoolUser,{page:t,limit:e,school_id:a})},visitors:function(t,e,a){return n["a"].get(s.a.Visitors,{page:t,limit:e,school_id:a})},teacherUser:function(t,e,a){return n["a"].get(s.a.TeacherUser,{page:t,limit:e,school_id:a})},orders:function(t,e,a){return n["a"].get(s.a.Orders,{page:t,limit:e,school_id:a})},server:function(t,e,a){return n["a"].get(s.a.Server,{page:t,limit:e,product_id:a})},schoolTeacher:function(t,e,a){return n["a"].get(s.a.Teacher,{page:t,limit:e,school_id:a})},school:function(t){return n["a"].post(s.a.School,t)},delSchool:function(t){return n["a"].del(s.a.DelSchool,{school_id:t})},banners:function(t,e){return n["a"].get(s.a.Banners,{page:t,limit:e})},banner:function(t){return n["a"].post(s.a.Banner,t)},message:function(t){return n["a"].post(s.a.Message,t)},messages:function(t,e){return n["a"].get(s.a.Messages,{page:t,limit:e})},messageType:function(t){return n["a"].post(s.a.MessageType,t)},messageTypes:function(t,e){return n["a"].get(s.a.MessageTypes,{page:t,limit:e})},delDocumentType:function(t){return n["a"].del(s.a.DelDocumentType,{id:t})},documents:function(t,e){return n["a"].get(s.a.Documents,{page:t,limit:e})},delDocument:function(t){return n["a"].del(s.a.DelDocument,{id:t})},document:function(t){return n["a"].post(s.a.Document,t)},documentDel:function(t){return n["a"].del(s.a.DocumentDel,{id:t})},delBanner:function(t){return n["a"].del(s.a.DelBanner,{id:t})},buys:function(t,e){return n["a"].get(s.a.Buys,{page:t,limit:e})},buy:function(t){return n["a"].post(s.a.Buy,t)},roles:function(t,e){return n["a"].get(s.a.Roles,{page:t,limit:e})},role:function(t){return n["a"].post(s.a.Role,t)},delRole:function(t){return n["a"].del(s.a.DelRole,{id:t})},user:function(t){return n["a"].post(s.a.User,t)},users:function(t,e){return n["a"].get(s.a.Users,{page:t,limit:e})},delUser:function(t){return n["a"].del(s.a.DelUser,{id:t})},resetPassword:function(t){return n["a"].post(s.a.ResetPassword,t)},goods:function(t){return n["a"].get(s.a.Buys,{school_id:t})},setProduct:function(t){return n["a"].post(s.a.SetProduct,t)},banProduct:function(t){return n["a"].post(s.a.BanProduct,t)},banProducts:function(t){return n["a"].get(s.a.BanProducts,{user_id:t})},userSearch:function(t){return n["a"].get(s.a.UserSearch,{id:t})},jurisdictionSchool:function(t,e){return n["a"].get(s.a.JurisdictionSchool,{user_id:t,mode:e})},jurisdictionProducts:function(t){return n["a"].get(s.a.JurisdictionProducts,{school_id:t})},jurisdictionStudent:function(t,e){return n["a"].get(s.a.JurisdictionStudent,{user_id:t,school_id:e})},studentsTatal:function(t,e){return n["a"].get(s.a.StudentsTatal,{type:t,id:e})},studentGender:function(t,e,a,i){return n["a"].get(s.a.StudentGender,{sex:t,type:e,school_id:a,grade_id:i})},classCheckCount:function(t){return n["a"].get(s.a.ClassCheckCount,{id:t})},statistics:function(t,e){return n["a"].get(s.a.Statistics,{school_id:t,grade_id:e})},updateFace:function(t){return n["a"].post(s.a.UpdateFace,t)},sign:function(t,e,a,i,r){return n["a"].get(s.a.Sign,{page:t,limit:e,name:a,start:i,end:r})},signs:function(t,e,a,i,r,l,o){return n["a"].get(s.a.Signs,{page:t,limit:e,user_id:a,type:i,status:r,start:l,end:o})},signsTime:function(t,e,a,i,r){return n["a"].get(s.a.Signs,{age:t,limit:e,user_id:a,start:i,end:r})},editSchool:function(t,e){return n["a"].post(s.a.EditSchool,{up_time:t,below_time:e})}};e["a"]=r},d056:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"element-loading-text":"拼命加载中"}},[a("div",{staticClass:"handle-box"},[a("div",{staticClass:"btn"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入用户名"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(t.name)}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.search(t.name)}},slot:"append"}),a("el-button",{attrs:{slot:"append",icon:"el-icon-refresh"},on:{click:t.refresh},slot:"append"})],1)],1),a("div",{staticClass:"btn"},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions,"value-format":"yyyy-MM-dd"},on:{change:t.timeChange},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),"admin"!=t.username?a("div",{staticClass:"btn"},[a("span",[t._v("设置上下班时间: ")]),a("el-time-select",{attrs:{placeholder:"上班时间","picker-options":{start:"08:30",step:"00:15",end:"18:30"}},on:{change:t.changeUp},model:{value:t.up_time,callback:function(e){t.up_time=e},expression:"up_time"}}),a("el-time-select",{attrs:{placeholder:"下班时间","picker-options":{start:"08:30",step:"00:15",end:"18:30",minTime:t.up_time}},on:{change:t.changeBelow},model:{value:t.below_time,callback:function(e){t.below_time=e},expression:"below_time"}}),a("el-button",{attrs:{slot:"append",icon:"el-icon-setting"},on:{click:t.toSet},slot:"append"})],1):t._e()]),a("el-table",{attrs:{data:t.tableDate,border:"","header-cell-style":{background:"#f0f0f0"}}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),a("el-table-column",{attrs:{prop:"user_id",label:"用户ID"}}),a("el-table-column",{attrs:{prop:"name",label:"用户名"}}),a("el-table-column",{attrs:{prop:"count",label:"签到总数"}}),a("el-table-column",{attrs:{prop:"up_count",label:"上班签到"}}),a("el-table-column",{attrs:{prop:"below_count",label:"下班签到"}}),a("el-table-column",{attrs:{label:"操作",width:"300px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.handleDetail(e.$index,e.row)}}},[t._v("签到详情")])]}}])})],1),a("el-dialog",{attrs:{title:"签到详情",visible:t.dialogDetail,"close-on-click-modal":!1,width:"1200px"},on:{"update:visible":function(e){t.dialogDetail=e}}},[a("div",{staticClass:"handle-box"},[a("div",{staticClass:"btn"},[a("span",[t._v("签到方式: ")]),a("el-select",{attrs:{placeholder:"请选择签到方式"},on:{change:t.changeAudit},model:{value:t.auditState,callback:function(e){t.auditState=e},expression:"auditState"}},t._l(t.auditList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("div",{staticClass:"btn"},[a("span",[t._v("签到时间: ")]),a("el-select",{attrs:{placeholder:"请选择签到时间"},on:{change:t.changeTime},model:{value:t.auditTime,callback:function(e){t.auditTime=e},expression:"auditTime"}},t._l(t.timeList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("div",{staticClass:"btn"},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions,"value-format":"yyyy-MM-dd"},on:{change:t.timeChange1},model:{value:t.time1,callback:function(e){t.time1=e},expression:"time1"}})],1)]),a("el-table",{attrs:{data:t.detailData,border:"","header-cell-style":{background:"#f0f0f0"}}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),a("el-table-column",{attrs:{prop:"user_id",label:"用户ID"}}),a("el-table-column",{attrs:{prop:"name",label:"用户名"}}),a("el-table-column",{attrs:{prop:"type",label:"签到方式"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.type?a("span",[t._v("刷脸签到")]):2==e.row.type?a("span",[t._v("手动打卡签到")]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"status",label:"签到时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("span",[t._v("上班")]):2==e.row.status?a("span",[t._v("下班")]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"text",label:"状态"}}),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间"}})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.detailsCurrent,"page-sizes":[10,20,30,40,50],"page-size":t.detailsSize,layout:"sizes, prev, pager, next, jumper",total:t.detailsTotal},on:{"current-change":t.detailsCurrentChange,"update:currentPage":function(e){t.detailsCurrent=e},"update:current-page":function(e){t.detailsCurrent=e},"size-change":t.detailsSizeChange}})],1)],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.current,"page-sizes":[10,20,30,40,50],"page-size":t.size,layout:"sizes, prev, pager, next, jumper",total:t.total},on:{"current-change":t.currentChange,"update:currentPage":function(e){t.current=e},"update:current-page":function(e){t.current=e},"size-change":t.sizeChange}})],1)],1)},i=[],s=(a("b0c0"),a("365c")),r={inject:["reload"],data:function(){return{loading:!0,tableDate:[],current:1,total:0,size:10,detailsCurrent:1,detailsTotal:0,detailsSize:10,name:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},time:"",start:"",end:"",time1:"",start1:"",end1:"",user_id:"",dialogDetail:!1,detailData:[],auditState:"",auditList:[{value:1,label:"刷脸"},{value:2,label:"手动"}],auditTime:"",timeList:[{value:1,label:"上班"},{value:2,label:"下班"}],type:"",status:"",up_time:"",below_time:"",username:localStorage.getItem("username")}},mounted:function(){this.getSign()},methods:{getSign:function(){var t=this;s["a"].sign(t.current,t.size).then((function(e){t.loading=!1,t.tableDate=e.data,t.total=e.total})).catch((function(e){t.loading=!1}))},currentChange:function(t){var e=this;e.loading=!0,e.current=t,e.name?s["a"].sign(t,e.size,e.name).then((function(t){e.loading=!1,e.tableDate=t.data,e.total=t.total})).catch((function(t){e.loading=!1})):e.time?s["a"].sign(t,e.size,e.name,e.start,e.end).then((function(t){e.loading=!1,e.tableDate=t.data,e.total=t.total})):s["a"].sign(t,e.size).then((function(t){e.loading=!1,e.tableDate=t.data,e.total=t.total})).catch((function(t){e.loading=!1}))},sizeChange:function(t){var e=this;e.loading=!0,e.size=t,e.name?s["a"].sign(e.current,t,e.name).then((function(t){e.loading=!1,e.tableDate=t.data,e.total=t.total})).catch((function(t){e.loading=!1})):e.time?s["a"].sign(e.current,t,e.name,e.start,e.end).then((function(t){e.loading=!1,e.tableDate=t.data,e.total=t.total})):s["a"].sign(e.current,t).then((function(t){e.loading=!1,e.tableDate=t.data,e.total=t.total})).catch((function(t){e.loading=!1}))},search:function(){var t=this;t.time="",t.current=1,s["a"].sign(t.current,t.size,t.name).then((function(e){t.$message.success("搜索成功"),t.loading=!1,t.tableDate=e.data,t.total=e.total})).catch((function(e){t.loading=!1}))},timeChange:function(t){var e=this;e.start=t[0],e.end=t[1],e.loading=!0,s["a"].sign(e.current,e.size,e.name,e.start,e.end).then((function(t){e.loading=!1,e.tableDate=t.data,e.total=t.total}))},handleDetail:function(t,e){var a=this;a.dialogDetail=!0,a.user_id=e.user_id,a.auditState="",a.auditTime="",a.time1="",a.status="",a.type="",a.detailsCurrent=1,a.start1="",a.end1="",s["a"].signs(a.detailsCurrent,a.detailsSize,a.user_id).then((function(t){a.$message.success("获取数据成功"),a.detailData=t.data,a.detailsTotal=t.total}))},changeAudit:function(t){var e=this;e.type=t,e.detailsCurrent=1,s["a"].signs(e.detailsCurrent,e.detailsSize,e.user_id,e.type,e.status,e.start1,e.end1).then((function(t){e.$message.success("获取数据成功"),e.detailData=t.data,e.detailsTotal=t.total}))},changeTime:function(t){var e=this;e.status=t,e.detailsCurrent=1,s["a"].signs(e.detailsCurrent,e.detailsSize,e.user_id,e.type,e.status,e.start1,e.end1).then((function(t){e.$message.success("获取数据成功"),e.detailData=t.data,e.detailsTotal=t.total}))},timeChange1:function(t){var e=this;e.start1=t[0],e.end1=t[1],e.detailsCurrent=1,e.type||e.status?s["a"].signs(e.detailsCurrent,e.detailsSize,e.user_id,e.type,e.status,e.start1,e.end1).then((function(t){e.$message.success("获取数据成功"),e.detailData=t.data,e.detailsTotal=t.total})):s["a"].signsTime(e.detailsCurrent,e.detailsSize,e.user_id,e.start1,e.end1).then((function(t){e.$message.success("获取数据成功"),e.detailData=t.data,e.detailsTotal=t.total}))},detailsCurrentChange:function(t){var e=this;e.detailsCurrent=t,e.type||e.status?s["a"].signs(t,e.detailsSize,e.user_id,e.type,e.status,e.start1,e.end1).then((function(t){e.$message.success("获取数据成功"),e.detailData=t.data,e.detailsTotal=t.total})):e.start1||e.end1?s["a"].signsTime(t,e.detailsSize,e.user_id,e.start1,e.end1).then((function(t){e.$message.success("获取数据成功"),e.detailData=t.data,e.detailsTotal=t.total})):s["a"].signs(t,e.detailsSize,e.user_id).then((function(t){e.$message.success("获取数据成功"),e.detailData=t.data,e.detailsTotal=t.total}))},detailsSizeChange:function(t){var e=this;e.detailsSize=t,e.type||e.status?s["a"].signs(e.detailsCurrent,t,e.user_id,e.type,e.status,e.start1,e.end1).then((function(t){e.$message.success("获取数据成功"),e.detailData=t.data,e.detailsTotal=t.total})):e.start1||e.end1?s["a"].signsTime(e.detailsCurrent,t,e.user_id,e.start1,e.end1).then((function(t){e.$message.success("获取数据成功"),e.detailData=t.data,e.detailsTotal=t.total})):s["a"].signs(e.detailsCurrent,t,e.user_id).then((function(t){e.$message.success("获取数据成功"),e.detailData=t.data,e.detailsTotal=t.total}))},changeUp:function(t){var e=this;e.up_time=t},changeBelow:function(t){var e=this;e.below_time=t},toSet:function(){var t=this;t.loading=!0,s["a"].editSchool(t.up_time,t.below_time).then((function(e){t.loading=!1,t.$message.success("设置成功! "),t.up_time="",t.below_time=""})).catch((function(e){t.loading=!1}))},refresh:function(){this.reload()}}},l=r,o=a("2877"),u=Object(o["a"])(l,n,i,!1,null,"2da7eb34",null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-582efe4d.b342d166.js.map
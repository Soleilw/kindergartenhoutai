(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-babbd4b4"],{"05cc":function(t,e,a){},"365c":function(t,e,a){"use strict";var n=a("be3b"),i=a("99b1"),l=a.n(i),o={students:function(t,e,a){return n["a"].get(l.a.Students,{page:t,limit:e,class_id:a})},student:function(t){return n["a"].post(l.a.Student,t)},delStudent:function(t){return n["a"].del(l.a.DelStudent,{student_id:t})},searchNumber:function(t,e,a){return n["a"].get(l.a.Students,{page:t,limit:e,number:a})},searchName:function(t,e,a){return n["a"].get(l.a.Students,{page:t,limit:e,name:a})},wxUser:function(t,e){return n["a"].get(l.a.WxUser,{page:t,limit:e})},bindFamily:function(t){return n["a"].post(l.a.BindFamily,t)},familySearch:function(t,e,a){return n["a"].get(l.a.FamilySearch,{page:t,limit:e,number:a})},studentFace:function(t){return n["a"].post(l.a.StudentFace,t)},studentEditFace:function(t){return n["a"].put(l.a.StudentEditFace,t)},faceLogs:function(t,e,a){return n["a"].get(l.a.StudentFaceLogs,{page:t,limit:e,id:a})},grade:function(t){return n["a"].post(l.a.Grade,t)},grades:function(t,e){return n["a"].get(l.a.Grades,{page:t,limit:e})},delGrade:function(t){return n["a"].del(l.a.DelGrade,{grade_id:t})},_class:function(t){return n["a"].post(l.a.Class,t)},classes:function(t,e,a){return n["a"].get(l.a.Classes,{page:t,limit:e,grade_id:a})},delClass:function(t){return n["a"].del(l.a.DelClass,{class_id:t})},device:function(t){return n["a"].post(l.a.Device,t)},devices:function(t){return n["a"].post(l.a.Devices,{page:t})},family:function(t,e){return n["a"].get(l.a.Family,{page:t,limit:e})},masterFamily:function(t){return n["a"].put(l.a.MasterFamily,t)},delFamily:function(t){return n["a"].del(l.a.DelFamily,{id:t})},announcement:function(t){return n["a"].get(l.a.Announcement,{page:t})},exam:function(t){return n["a"].post(l.a.Exam,t)},exams:function(t,e){return n["a"].get(l.a.Exams,{page:t,limit:e})},examsDetail:function(t,e,a){return n["a"].get(l.a.ExamsDetail,{page:t,limit:e,exam_id:a})},delExam:function(t){return n["a"].del(l.a.Exam,{id:t})},subjects:function(){return n["a"].get(l.a.Subjects)},importsExam:function(t,e){return n["a"].post(l.a.ImportsExam,{exam_id:t,file:e})},imports:function(t,e){return n["a"].get(l.a.Imports,{page:t,limit:e})},delImport:function(t){return n["a"].del(l.a.DelImport,{id:t})},example:function(t){return n["a"].getExcel(l.a.Export,{subjects:t})},teacher:function(t,e,a,i){return n["a"].get(l.a.Teacher,{page:t,limit:e,state:a,worker:i})},delTeacher:function(t){return n["a"].del(l.a.DelTeacher,{id:t})},audit:function(t){return n["a"].post(l.a.Audit,t)},schools:function(t,e,a,i){return n["a"].get(l.a.Schools,{page:t,limit:e,mode:a,id:i})},oneSchool:function(t){return n["a"].get(l.a.School,{id:t})},studentInfo:function(t,e,a){return n["a"].get(l.a.StudentInfo,{page:t,limit:e,school_id:a})},schoolUser:function(t,e,a){return n["a"].get(l.a.SchoolUser,{page:t,limit:e,school_id:a})},visitors:function(t,e,a){return n["a"].get(l.a.Visitors,{page:t,limit:e,school_id:a})},teacherUser:function(t,e,a){return n["a"].get(l.a.TeacherUser,{page:t,limit:e,school_id:a})},orders:function(t,e,a){return n["a"].get(l.a.Orders,{page:t,limit:e,school_id:a})},server:function(t,e,a){return n["a"].get(l.a.Server,{page:t,limit:e,product_id:a})},schoolTeacher:function(t,e,a){return n["a"].get(l.a.Teacher,{page:t,limit:e,school_id:a})},school:function(t){return n["a"].post(l.a.School,t)},delSchool:function(t){return n["a"].del(l.a.DelSchool,{school_id:t})},banners:function(t,e){return n["a"].get(l.a.Banners,{page:t,limit:e})},banner:function(t){return n["a"].post(l.a.Banner,t)},message:function(t){return n["a"].post(l.a.Message,t)},messages:function(t,e){return n["a"].get(l.a.Messages,{page:t,limit:e})},messageType:function(t){return n["a"].post(l.a.MessageType,t)},messageTypes:function(t,e){return n["a"].get(l.a.MessageTypes,{page:t,limit:e})},delDocumentType:function(t){return n["a"].del(l.a.DelDocumentType,{id:t})},documents:function(t,e){return n["a"].get(l.a.Documents,{page:t,limit:e})},delDocument:function(t){return n["a"].del(l.a.DelDocument,{id:t})},document:function(t){return n["a"].post(l.a.Document,t)},documentDel:function(t){return n["a"].del(l.a.DocumentDel,{id:t})},delBanner:function(t){return n["a"].del(l.a.DelBanner,{id:t})},buys:function(t,e){return n["a"].get(l.a.Buys,{page:t,limit:e})},buy:function(t){return n["a"].post(l.a.Buy,t)},roles:function(t,e){return n["a"].get(l.a.Roles,{page:t,limit:e})},role:function(t){return n["a"].post(l.a.Role,t)},delRole:function(t){return n["a"].del(l.a.DelRole,{id:t})},user:function(t){return n["a"].post(l.a.User,t)},users:function(t,e){return n["a"].get(l.a.Users,{page:t,limit:e})},delUser:function(t){return n["a"].del(l.a.DelUser,{id:t})},resetPassword:function(t){return n["a"].post(l.a.ResetPassword,t)},goods:function(t){return n["a"].get(l.a.Buys,{school_id:t})},setProduct:function(t){return n["a"].post(l.a.SetProduct,t)},banProduct:function(t){return n["a"].post(l.a.BanProduct,t)},banProducts:function(t){return n["a"].get(l.a.BanProducts,{user_id:t})},userSearch:function(t){return n["a"].get(l.a.UserSearch,{id:t})},jurisdictionSchool:function(t,e){return n["a"].get(l.a.JurisdictionSchool,{user_id:t,mode:e})},jurisdictionProducts:function(t){return n["a"].get(l.a.JurisdictionProducts,{school_id:t})},jurisdictionStudent:function(t,e){return n["a"].get(l.a.JurisdictionStudent,{user_id:t,school_id:e})},studentsTatal:function(t,e){return n["a"].get(l.a.StudentsTatal,{type:t,id:e})},studentGender:function(t,e,a,i){return n["a"].get(l.a.StudentGender,{sex:t,type:e,school_id:a,grade_id:i})},classCheckCount:function(t){return n["a"].get(l.a.ClassCheckCount,{id:t})},statistics:function(t,e){return n["a"].get(l.a.Statistics,{school_id:t,grade_id:e})},updateFace:function(t){return n["a"].post(l.a.UpdateFace,t)},sign:function(t,e,a,i,o){return n["a"].get(l.a.Sign,{page:t,limit:e,name:a,start:i,end:o})},signs:function(t,e,a,i,o,r,s){return n["a"].get(l.a.Signs,{page:t,limit:e,user_id:a,type:i,status:o,start:r,end:s})},signsTime:function(t,e,a,i,o){return n["a"].get(l.a.Signs,{age:t,limit:e,user_id:a,start:i,end:o})},editSchool:function(t,e){return n["a"].post(l.a.EditSchool,{up_time:t,below_time:e})}};e["a"]=o},"589b":function(t,e,a){"use strict";var n=a("05cc"),i=a.n(n);i.a},7193:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"考试列表",name:"test"}},[a("achievement-test")],1),a("el-tab-pane",{attrs:{label:"导入成绩",name:"into"}},[a("achievement-into")],1)],1)],1)},i=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"handle-box"},[a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogExam=!0}}},[t._v("批量上传成绩单（上传EXCEL文件）")])],1),a("div",{staticClass:"btn"},[a("el-popover",{attrs:{placement:"bottom",width:"400"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("div",{staticStyle:{"margin-bottom":"10px",color:"#2a9f93"}},[t._v("请选择科目生成成绩单示例模板")]),a("div",{staticClass:"permission"},t._l(t.subList,(function(e,n){return a("div",{key:n},[a("el-checkbox-group",{staticClass:"permission-item",model:{value:t.subjects,callback:function(e){t.subjects=e},expression:"subjects"}},[a("el-checkbox",{attrs:{label:t.subList[n]}},[t._v(t._s(t.subList[n]))])],1)],1)})),0),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.downExample}},[t._v("确定")])],1),a("el-button",{attrs:{slot:"reference",type:"warning",icon:"el-icon-download"},slot:"reference"},[t._v("点击下载成绩单示例")])],1)],1)]),a("el-dialog",{attrs:{title:"添加成绩单",visible:t.dialogExam,width:"500px","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogExam=e}}},[a("div",{staticClass:"btn"},[a("el-select",{attrs:{placeholder:"请选择考试场次"},on:{change:t.examOnChange},model:{value:t.test,callback:function(e){t.test=e},expression:"test"}},t._l(t.testList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)],1),a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"",action:"https://school.fengniaotuangou.cn/import/exam",data:t.examData,"on-remove":t.handleRemove,"file-list":t.fileList,"auto-upload":!1,"on-success":t.handleSuccess,headers:t.uploadHeader}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[t._v(" 将文件拖到此处，或 "),a("em",[t._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传EXCEL文件")])]),a("div",{staticClass:"upload-btn"},[a("el-button",{attrs:{type:"primary"},on:{click:t.upload}},[t._v("导入数据")])],1)],1),a("el-table",{staticClass:"aip-table",attrs:{data:t.tableDate,border:"","header-cell-style":{background:"#f0f0f0"}}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),a("el-table-column",{attrs:{prop:"file_name",label:"文件名"}}),a("el-table-column",{attrs:{prop:"updated_at",label:"上传时间"}}),a("el-table-column",{attrs:{prop:"status",label:"导入情况"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("span",[t._v("成功")]):2==e.row.status?a("span",[t._v("失败")]):t._e()]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.handleDownload(e.$index,e.row)}}},[t._v("下载成绩表")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDel(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),a("el-dialog",{attrs:{visible:t.dialogDel,title:"删除成绩表",width:"20%",align:"center","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogDel=e}}},[a("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[t._v("是否删除该成绩表")]),a("span",[a("el-button",{attrs:{type:"primary"},on:{click:t.toDel}},[t._v("删除")]),a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.dialogDel=!1}}},[t._v("取消")])],1)]),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40,50],"page-size":t.pageSize,layout:"sizes, prev, pager, next, jumper",total:t.totalPage},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"size-change":t.handleSizeChange}})],1)],1)},o=[],r=(a("4160"),a("b0c0"),a("159b"),a("365c")),s={name:"studentadd",data:function(){return{dialogDel:!1,dialogExam:!1,id:"",test:"",testList:[],exam_id:"",examList:[],fileList:[],examData:{exam_id:""},visible:!1,subList:[],subjects:[],tableDate:[],currentPage:1,totalPage:0,pageSize:10}},computed:{uploadHeader:function(){return{token:localStorage.getItem("token")}}},mounted:function(){this.getSubjects(),this.getExams(),this.getList()},methods:{getList:function(){var t=this;r["a"].imports(t.currentPage,t.pageSize).then((function(e){console.log(e),t.tableDate=e.data,t.totalPage=e.total}))},examOnChange:function(t){var e=this;e.test=t},getSubjects:function(){var t=this;r["a"].subjects().then((function(e){e.forEach((function(e){t.subList.push(e.name)}))}))},downExample:function(){var t=this;r["a"].example(t.subjects).then((function(t){window.open(t.request.responseURL)}))},getExams:function(){var t=this;r["a"].exams(t.currentPage).then((function(e){console.log("getExams",e.data),t.testList=e.data,e.data.forEach((function(e){t.exam_id=e.id}))}))},handleDel:function(t,e){var a=this;a.id=e.id,console.log(e),a.dialogDel=!0},toDel:function(){var t=this;r["a"].delImport(t.id).then((function(e){t.$message.success("删除成功"),t.dialogDel=!1,t.getList()}))},handleDownload:function(){},upload:function(){this.examData.exam_id=this.exam_id,this.$refs.upload.submit()},handleRemove:function(t,e){console.log(t,e)},handleSuccess:function(t,e){var a=this;a.dialogExam=!1,a.$message.success("导入成功"),a.getList(),a.fileList=[],a.test=""},handleCurrentChange:function(t){var e=this;e.currentPage=t,r["a"].imports(t,e.pageSize).then((function(t){e.tableDate=t.data,e.totalPage=t.total}))},handleSizeChange:function(t){var e=this;e.pageSize=t,r["a"].imports(e.currentPage,t).then((function(t){e.tableDate=t.data,e.totalPage=t.total}))}}},u=s,c=(a("f6108"),a("2877")),d=Object(c["a"])(u,l,o,!1,null,"a1cc2d86",null),g=d.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"handle-box"},[a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addTest}},[t._v("添加考试")])],1)]),a("el-dialog",{attrs:{title:"添加考试",visible:t.dialogTest},on:{"update:visible":function(e){t.dialogTest=e}}},[a("div",{staticClass:"box"},[a("el-form",{attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"时间"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}})],1),a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{placeholder:"请输入标题(例:期中考试)"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),a("div",{staticClass:"submit"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.newTest}},[t._v("提交")])],1)],1)],1)],1)]),a("el-table",{attrs:{data:t.tableDate,border:"","header-cell-style":{background:"#f0f0f0"}}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.handleDetail(e.$index,e.row)}}},[t._v("考试详情")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40,50],"page-size":t.pageSize,layout:"sizes, prev, pager, next, jumper",total:t.totalPage},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"size-change":t.handleSizeChange}})],1),a("el-dialog",{attrs:{visible:t.dialogDetail,title:"考试详情","close-on-click-modal":!1,width:"80%"},on:{"update:visible":function(e){t.dialogDetail=e}}},[a("el-table",{attrs:{data:t.testDetail}},[a("el-table-column",{attrs:{prop:"grade",label:"年级"}}),a("el-table-column",{attrs:{prop:"class",label:"班级"}}),a("el-table-column",{attrs:{prop:"number",label:"学号"}}),a("el-table-column",{attrs:{prop:"name",label:"学生姓名"}}),a("el-table-column",{attrs:{prop:"score",label:"总分"}}),a("el-table-column",{attrs:{prop:"class_ranking",label:"班级排名"}}),a("el-table-column",{attrs:{prop:"grade_ranking",label:"年级排名"}}),a("el-table-column",{attrs:{prop:"class_advance",label:"班级进退步"}}),a("el-table-column",{attrs:{prop:"grade_advance",label:"年级进退步"}}),a("el-table-column",{attrs:{prop:"scores[0].subject",label:"科目"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.handleDel(e.$index,e.row)}}},[t._v("查看各科成绩")])]}}])})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.testDetailCurrentPage,"page-sizes":[10,20,30,40,50],"page-size":t.testDetailPageSize,layout:"sizes, prev, pager, next, jumper",total:t.testDetailTotalPage},on:{"current-change":t.handleTestDetailCurrent,"update:currentPage":function(e){t.testDetailCurrentPage=e},"update:current-page":function(e){t.testDetailCurrentPage=e},"size-change":t.handleTestDetailSizeChange}})],1)],1),a("el-dialog",{attrs:{visible:t.dialogDel,title:"删除资讯",width:"20%",align:"center","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogDel=e}}},[a("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[t._v("是否删除")]),a("span",[a("el-button",{attrs:{type:"primary"},on:{click:t.toDel}},[t._v("删除")]),a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.dialogDel=!1}}},[t._v("取消")])],1)])],1)},p=[],f={name:"messagetype",data:function(){return{dialogTest:!1,id:"",dialogDel:!1,dialogDetail:!1,testDetail:[],testDetailCurrentPage:1,testDetailPageSize:10,testDetailTotalPage:0,gradeList:[],classesList:[],grade:"",classes:"",form:{title:"",time:""},tableDate:[],currentPage:1,pageSize:10,totalPage:0,exam_id:"",grade_id:""}},mounted:function(){this.getExams()},methods:{getExams:function(){var t=this;r["a"].exams(t.currentPage).then((function(e){t.tableDate=e.data,t.totalPage=e.total}))},getDetail:function(){var t=this;r["a"].examsDetail(t.testDetailCurrentPage,t.testDetailPageSize,t.exam_id).then((function(e){console.log("考试详情",e),t.testDetail=e.data,t.testDetailTotalPage=e.total}))},addTest:function(){var t=this;t.dialogTest=!0,t.form={title:"",time:""}},newTest:function(){var t=this;t.form.title=t.form.time+" "+t.form.title,r["a"].exam(t.form).then((function(e){t.$message.success("提交成功"),t.dialogTest=!1,t.getExams(),t.form={title:"",time:""}}))},handleDetail:function(t,e){var a=this;a.dialogDetail=!0,a.exam_id=e.id,a.getDetail(),a.getGrade()},handleDelete:function(t,e){var a=this;a.dialogDel=!0,a.id=e.id},toDel:function(){var t=this;r["a"].delExam(t.id).then((function(e){t.$message.success("删除成功"),t.dialogDel=!1,t.getExams()}))},handleCurrentChange:function(t){var e=this;e.currentPage=t,r["a"].exams(t,e.pageSize).then((function(t){e.tableDate=t.data,e.totalPage=t.total}))},handleSizeChange:function(t){var e=this;e.pageSize=t,r["a"].exams(1,t).then((function(t){e.tableDate=t.data,e.totalPage=t.total}))},handleTestDetailCurrent:function(t){var e=this;e.testDetailCurrentPage=t,r["a"].examsDetail(t,e.testDetailPageSize,e.exam_id).then((function(t){e.testDetail=t.data}))},handleTestDetailSizeChange:function(t){var e=this;e.testDetailPageSize=t,r["a"].examsDetail(1,t,e.exam_id).then((function(t){e.testDetail=t.data}))}}},b=f,h=(a("589b"),Object(c["a"])(b,m,p,!1,null,"6095c089",null)),v=h.exports,D={components:{achievementTest:v,achievementInto:g},data:function(){return{activeName:"test"}}},x=D,_=Object(c["a"])(x,n,i,!1,null,null,null);e["default"]=_.exports},"8e47":function(t,e,a){},f6108:function(t,e,a){"use strict";var n=a("8e47"),i=a.n(n);i.a}}]);
//# sourceMappingURL=chunk-babbd4b4.db1dd72c.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-582efe4d"],{"365c":function(e,t,a){"use strict";var n=a("be3b"),i=a("99b1"),r=a.n(i),o={students:function(e,t,a){return n["a"].get(r.a.Students,{page:e,limit:t,class_id:a})},student:function(e){return n["a"].post(r.a.Student,e)},delStudent:function(e){return n["a"].del(r.a.DelStudent,{student_id:e})},searchNumber:function(e,t,a){return n["a"].get(r.a.Students,{page:e,limit:t,number:a})},searchName:function(e,t,a){return n["a"].get(r.a.Students,{page:e,limit:t,name:a})},wxUser:function(e,t){return n["a"].get(r.a.WxUser,{page:e,limit:t})},bindFamily:function(e){return n["a"].post(r.a.BindFamily,e)},familySearch:function(e,t,a){return n["a"].get(r.a.FamilySearch,{page:e,limit:t,number:a})},studentFace:function(e){return n["a"].post(r.a.StudentFace,e)},studentEditFace:function(e){return n["a"].put(r.a.StudentEditFace,e)},faceLogs:function(e,t,a){return n["a"].get(r.a.StudentFaceLogs,{page:e,limit:t,id:a})},grade:function(e){return n["a"].post(r.a.Grade,e)},grades:function(e,t){return n["a"].get(r.a.Grades,{page:e,limit:t})},delGrade:function(e){return n["a"].del(r.a.DelGrade,{grade_id:e})},_class:function(e){return n["a"].post(r.a.Class,e)},classes:function(e,t,a){return n["a"].get(r.a.Classes,{page:e,limit:t,grade_id:a})},delClass:function(e){return n["a"].del(r.a.DelClass,{class_id:e})},device:function(e){return n["a"].post(r.a.Device,e)},devices:function(e){return n["a"].post(r.a.Devices,{page:e})},family:function(e,t){return n["a"].get(r.a.Family,{page:e,limit:t})},masterFamily:function(e){return n["a"].put(r.a.MasterFamily,e)},delFamily:function(e){return n["a"].del(r.a.DelFamily,{id:e})},announcement:function(e){return n["a"].get(r.a.Announcement,{page:e})},exam:function(e){return n["a"].post(r.a.Exam,e)},exams:function(e,t){return n["a"].get(r.a.Exams,{page:e,limit:t})},examsDetail:function(e,t,a){return n["a"].get(r.a.ExamsDetail,{page:e,limit:t,exam_id:a})},delExam:function(e){return n["a"].del(r.a.Exam,{id:e})},subjects:function(){return n["a"].get(r.a.Subjects)},importsExam:function(e,t){return n["a"].post(r.a.ImportsExam,{exam_id:e,file:t})},imports:function(e,t){return n["a"].get(r.a.Imports,{page:e,limit:t})},delImport:function(e){return n["a"].del(r.a.DelImport,{id:e})},example:function(e){return n["a"].getExcel(r.a.Export,{subjects:e})},teacher:function(e,t,a,i){return n["a"].get(r.a.Teacher,{page:e,limit:t,state:a,worker:i})},delTeacher:function(e){return n["a"].del(r.a.DelTeacher,{id:e})},audit:function(e){return n["a"].post(r.a.Audit,e)},schools:function(e,t,a,i){return n["a"].get(r.a.Schools,{page:e,limit:t,mode:a,id:i})},oneSchool:function(e){return n["a"].get(r.a.School,{id:e})},studentInfo:function(e,t,a){return n["a"].get(r.a.StudentInfo,{page:e,limit:t,school_id:a})},schoolUser:function(e,t,a){return n["a"].get(r.a.SchoolUser,{page:e,limit:t,school_id:a})},visitors:function(e,t,a){return n["a"].get(r.a.Visitors,{page:e,limit:t,school_id:a})},teacherUser:function(e,t,a){return n["a"].get(r.a.TeacherUser,{page:e,limit:t,school_id:a})},orders:function(e,t,a){return n["a"].get(r.a.Orders,{page:e,limit:t,school_id:a})},server:function(e,t,a){return n["a"].get(r.a.Server,{page:e,limit:t,product_id:a})},schoolTeacher:function(e,t,a){return n["a"].get(r.a.Teacher,{page:e,limit:t,school_id:a})},school:function(e){return n["a"].post(r.a.School,e)},delSchool:function(e){return n["a"].del(r.a.DelSchool,{school_id:e})},banners:function(e,t){return n["a"].get(r.a.Banners,{page:e,limit:t})},banner:function(e){return n["a"].post(r.a.Banner,e)},message:function(e){return n["a"].post(r.a.Message,e)},messages:function(e,t){return n["a"].get(r.a.Messages,{page:e,limit:t})},messageType:function(e){return n["a"].post(r.a.MessageType,e)},messageTypes:function(e,t){return n["a"].get(r.a.MessageTypes,{page:e,limit:t})},delDocumentType:function(e){return n["a"].del(r.a.DelDocumentType,{id:e})},documents:function(e,t){return n["a"].get(r.a.Documents,{page:e,limit:t})},delDocument:function(e){return n["a"].del(r.a.DelDocument,{id:e})},document:function(e){return n["a"].post(r.a.Document,e)},documentDel:function(e){return n["a"].del(r.a.DocumentDel,{id:e})},delBanner:function(e){return n["a"].del(r.a.DelBanner,{id:e})},buys:function(e,t){return n["a"].get(r.a.Buys,{page:e,limit:t})},buy:function(e){return n["a"].post(r.a.Buy,e)},roles:function(e,t){return n["a"].get(r.a.Roles,{page:e,limit:t})},role:function(e){return n["a"].post(r.a.Role,e)},delRole:function(e){return n["a"].del(r.a.DelRole,{id:e})},user:function(e){return n["a"].post(r.a.User,e)},users:function(e,t){return n["a"].get(r.a.Users,{page:e,limit:t})},delUser:function(e){return n["a"].del(r.a.DelUser,{id:e})},resetPassword:function(e){return n["a"].post(r.a.ResetPassword,e)},goods:function(e){return n["a"].get(r.a.Buys,{school_id:e})},setProduct:function(e){return n["a"].post(r.a.SetProduct,e)},banProduct:function(e){return n["a"].post(r.a.BanProduct,e)},banProducts:function(e){return n["a"].get(r.a.BanProducts,{user_id:e})},userSearch:function(e){return n["a"].get(r.a.UserSearch,{id:e})},jurisdictionSchool:function(e,t){return n["a"].get(r.a.JurisdictionSchool,{user_id:e,mode:t})},jurisdictionProducts:function(e){return n["a"].get(r.a.JurisdictionProducts,{school_id:e})},jurisdictionStudent:function(e,t){return n["a"].get(r.a.JurisdictionStudent,{user_id:e,school_id:t})},studentsTatal:function(e,t){return n["a"].get(r.a.StudentsTatal,{type:e,id:t})},studentGender:function(e,t,a,i){return n["a"].get(r.a.StudentGender,{sex:e,type:t,school_id:a,grade_id:i})},classCheckCount:function(e){return n["a"].get(r.a.ClassCheckCount,{id:e})},statistics:function(e,t){return n["a"].get(r.a.Statistics,{school_id:e,grade_id:t})},updateFace:function(e){return n["a"].post(r.a.UpdateFace,e)},sign:function(e,t,a,i,o){return n["a"].get(r.a.Sign,{page:e,limit:t,name:a,start:i,end:o})},signs:function(e,t,a,i,o){return n["a"].get(r.a.Signs,{user_id:e,type:t,status:a,start:i,end:o})},signsTime:function(e,t,a){return n["a"].get(r.a.Signs,{user_id:e,start:t,end:a})},editSchool:function(e,t){return n["a"].post(r.a.EditSchool,{up_time:e,below_time:t})}};t["a"]=o},d056:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"拼命加载中"}},[a("div",{staticClass:"handle-box"},[a("div",{staticClass:"btn"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入用户名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(e.name)}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.search(e.name)}},slot:"append"}),a("el-button",{attrs:{slot:"append",icon:"el-icon-refresh"},on:{click:e.refresh},slot:"append"})],1)],1),a("div",{staticClass:"btn"},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd"},on:{change:e.timeChange},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1),"admin"!=e.username?a("div",{staticClass:"btn"},[a("span",[e._v("设置上下班时间: ")]),a("el-time-select",{attrs:{placeholder:"上班时间","picker-options":{start:"08:30",step:"00:15",end:"18:30"}},on:{change:e.changeUp},model:{value:e.up_time,callback:function(t){e.up_time=t},expression:"up_time"}}),a("el-time-select",{attrs:{placeholder:"下班时间","picker-options":{start:"08:30",step:"00:15",end:"18:30",minTime:e.up_time}},on:{change:e.changeBelow},model:{value:e.below_time,callback:function(t){e.below_time=t},expression:"below_time"}}),a("el-button",{attrs:{slot:"append",icon:"el-icon-setting"},on:{click:e.toSet},slot:"append"})],1):e._e()]),a("el-table",{attrs:{data:e.tableDate,border:"","header-cell-style":{background:"#f0f0f0"}}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),a("el-table-column",{attrs:{prop:"user_id",label:"用户ID"}}),a("el-table-column",{attrs:{prop:"name",label:"用户名"}}),a("el-table-column",{attrs:{prop:"count",label:"签到总数"}}),a("el-table-column",{attrs:{prop:"up_count",label:"上班签到"}}),a("el-table-column",{attrs:{prop:"below_count",label:"下班签到"}}),a("el-table-column",{attrs:{label:"操作",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleDetail(t.$index,t.row)}}},[e._v("签到详情")])]}}])})],1),a("el-dialog",{attrs:{title:"签到详情",visible:e.dialogDetail,"close-on-click-modal":!1,width:"1200px"},on:{"update:visible":function(t){e.dialogDetail=t}}},[a("div",{staticClass:"handle-box"},[a("div",{staticClass:"btn"},[a("span",[e._v("签到方式: ")]),a("el-select",{attrs:{placeholder:"请选择签到方式"},on:{change:e.changeAudit},model:{value:e.auditState,callback:function(t){e.auditState=t},expression:"auditState"}},e._l(e.auditList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"btn"},[a("span",[e._v("签到时间: ")]),a("el-select",{attrs:{placeholder:"请选择签到时间"},on:{change:e.changeTime},model:{value:e.auditTime,callback:function(t){e.auditTime=t},expression:"auditTime"}},e._l(e.timeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"btn"},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd"},on:{change:e.timeChange1},model:{value:e.time1,callback:function(t){e.time1=t},expression:"time1"}})],1)]),a("el-table",{attrs:{data:e.detailData,border:"","header-cell-style":{background:"#f0f0f0"}}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),a("el-table-column",{attrs:{prop:"user_id",label:"用户ID"}}),a("el-table-column",{attrs:{prop:"name",label:"用户名"}}),a("el-table-column",{attrs:{prop:"type",label:"签到方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?a("span",[e._v("刷脸签到")]):2==t.row.type?a("span",[e._v("手动打卡签到")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"status",label:"签到时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?a("span",[e._v("上班")]):2==t.row.status?a("span",[e._v("下班")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"text",label:"状态"}}),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间"}})],1)],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.current,"page-sizes":[10,20,30,40,50],"page-size":e.size,layout:"sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.currentChange,"update:currentPage":function(t){e.current=t},"update:current-page":function(t){e.current=t},"size-change":e.sizeChange}})],1)],1)},i=[],r=(a("b0c0"),a("365c")),o={inject:["reload"],data:function(){return{loading:!0,tableDate:[],current:1,total:0,size:10,name:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},time:"",start:"",end:"",time1:"",start1:"",end1:"",user_id:"",dialogDetail:!1,detailData:[],auditState:"",auditList:[{value:1,label:"刷脸"},{value:2,label:"手动"}],auditTime:"",timeList:[{value:1,label:"上班"},{value:2,label:"下班"}],type:"",status:"",up_time:"",below_time:"",username:localStorage.getItem("username")}},mounted:function(){this.getSign()},methods:{getSign:function(){var e=this;r["a"].sign(e.current,e.size).then((function(t){e.loading=!1,e.tableDate=t.data,e.total=t.total})).catch((function(t){e.loading=!1}))},currentChange:function(e){var t=this;t.loading=!0,t.current=e,t.name?r["a"].sign(e,t.size,t.name).then((function(e){t.loading=!1,t.tableDate=e.data,t.total=e.total})).catch((function(e){t.loading=!1})):t.time?r["a"].sign(e,t.size,t.name,t.start,t.end).then((function(e){t.loading=!1,t.tableDate=e.data,t.total=e.total})):r["a"].sign(e,t.size).then((function(e){t.loading=!1,t.tableDate=e.data,t.total=e.total})).catch((function(e){t.loading=!1}))},sizeChange:function(e){var t=this;t.loading=!0,t.size=e,t.name?r["a"].sign(t.current,e,t.name).then((function(e){t.loading=!1,t.tableDate=e.data,t.total=e.total})).catch((function(e){t.loading=!1})):t.time?r["a"].sign(t.current,e,t.name,t.start,t.end).then((function(e){t.loading=!1,t.tableDate=e.data,t.total=e.total})):r["a"].sign(t.current,e).then((function(e){t.loading=!1,t.tableDate=e.data,t.total=e.total})).catch((function(e){t.loading=!1}))},search:function(){var e=this;e.time="",e.current=1,r["a"].sign(e.current,e.size,e.name).then((function(t){e.$message.success("搜索成功"),e.loading=!1,e.tableDate=t.data,e.total=t.total})).catch((function(t){e.loading=!1}))},timeChange:function(e){var t=this;t.start=e[0],t.end=e[1],t.loading=!0,r["a"].sign(t.current,t.size,t.name,t.start,t.end).then((function(e){t.loading=!1,t.tableDate=e.data,t.total=e.total}))},handleDetail:function(e,t){var a=this;a.dialogDetail=!0,a.user_id=t.user_id,a.auditState="",a.auditTime="",a.time1="",r["a"].signs(a.user_id).then((function(e){a.$message.success("获取数据成功"),a.detailData=e}))},changeAudit:function(e){var t=this;t.type=e,r["a"].signs(t.user_id,t.type,t.status,t.start1,t.end1).then((function(e){t.$message.success("获取数据成功"),t.detailData=e}))},changeTime:function(e){var t=this;t.status=e,r["a"].signs(t.user_id,t.type,t.status,t.start1,t.end1).then((function(e){t.$message.success("获取数据成功"),t.detailData=e}))},timeChange1:function(e){var t=this;t.start1=e[0],t.end1=e[1],t.type||t.status?r["a"].signs(t.user_id,t.type,t.status,t.start1,t.end1).then((function(e){t.$message.success("获取数据成功"),t.detailData=e})):r["a"].signsTime(t.user_id,t.start1,t.end1).then((function(e){t.$message.success("获取数据成功"),t.detailData=e}))},changeUp:function(e){var t=this;t.up_time=e},changeBelow:function(e){var t=this;t.below_time=e},toSet:function(){var e=this;e.loading=!0,r["a"].editSchool(e.up_time,e.below_time).then((function(t){e.loading=!1,e.$message.success("设置成功! "),e.up_time="",e.below_time=""})).catch((function(t){e.loading=!1}))},refresh:function(){this.reload()}}},s=o,l=a("2877"),u=Object(l["a"])(s,n,i,!1,null,"69a4055e",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-582efe4d.b7a4dbbf.js.map